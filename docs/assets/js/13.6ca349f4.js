(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{370:function(t,e,r){"use strict";r.r(e);var a=r(26),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"socket-api"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#socket-api"}},[t._v("#")]),t._v(" Socket API")]),t._v(" "),r("h2",{attrs:{id:"endpoint"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#endpoint"}},[t._v("#")]),t._v(" Endpoint")]),t._v(" "),r("p",[t._v("The socket API is available at "),r("code",[t._v("https://<your domain or ip>")]),t._v(". Please note that it is based upon "),r("a",{attrs:{href:"https://socket.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("SocketIO"),r("OutboundLink")],1),t._v(" and will not work with normal websockets.")]),t._v(" "),r("h2",{attrs:{id:"authentication"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[t._v("#")]),t._v(" Authentication")]),t._v(" "),r("p",[t._v("A key will be generated and provided to the user when they create a controller via the web interface. The key is then entered into the controller's configuration file. When the controller initiates contact with the socket server, the key in addition to the controller's ID is provided to the socket server via a header named "),r("code",[t._v("key")]),t._v(" and "),r("code",[t._v("_id")]),t._v(" respectively.")]),t._v(" "),r("h2",{attrs:{id:"error-handling"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#error-handling"}},[t._v("#")]),t._v(" Error handling")]),t._v(" "),r("p",[t._v("All errors will be JSON encoded and in the following format:")]),t._v(" "),r("div",{staticClass:"language-javascript extra-class"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Short yet descriptive message"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Longer message, detailing how to avoid/fix the underlying cause for the error"')]),t._v("\n\t"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("h2",{attrs:{id:"messages"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#messages"}},[t._v("#")]),t._v(" Messages")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("Name")]),t._v(" "),r("th",[t._v("Hops")]),t._v(" "),r("th",[t._v("Body")]),t._v(" "),r("th",[t._v("Description")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[r("code",[t._v("error")])]),t._v(" "),r("td",[t._v("Core ▶ Frontend")]),t._v(" "),r("td",[r("code",[t._v('{"error": {"name": String, "description": String}}')])]),t._v(" "),r("td",[t._v("Send an error message to the frontend (Note that this should only be used for errors related to the Socket API and "),r("strong",[t._v("NOT")]),t._v(" the HTTP API)")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("command")])]),t._v(" "),r("td",[t._v("Frontend ▶ Core ▶ Controller")]),t._v(" "),r("td",[r("code",[t._v('{"machine": String, "payload": String}')])]),t._v(" "),r("td",[t._v("Send some short binary data to a machine (To command it)")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("execute")])]),t._v(" "),r("td",[t._v("Frontend ▶ Core")]),t._v(" "),r("td",[r("code",[t._v('{"machine": String, "file": String}')])]),t._v(" "),r("td",[t._v("Start executing a file on a machine (File payload is not sent yet because it's not stored by the frontend; the file ID is sent instead)")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("execute")])]),t._v(" "),r("td",[t._v("Core ▶ Controller")]),t._v(" "),r("td",[r("code",[t._v('{"machine": String, "payload": String}')])]),t._v(" "),r("td",[t._v("Start executing a file on a machine (File payload is added by the core)")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("output")])]),t._v(" "),r("td",[t._v("Controller ▶ Core")]),t._v(" "),r("td",[r("code",[t._v('{"machine": String, "payload": String}')])]),t._v(" "),r("td",[t._v("Forward serial output from a machine (Note that this is "),r("strong",[t._v("always sent")]),t._v(", even if no users are connected)")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("output")])]),t._v(" "),r("td",[t._v("Core ▶ Frontend")]),t._v(" "),r("td",[r("code",[t._v('{"machine": String, "payload": String}')])]),t._v(" "),r("td",[t._v("Forward serial output from a machine (Note that this is "),r("strong",[t._v("only")]),t._v(" forwarded to the frontend if the client has first sent the "),r("code",[t._v("startOutput")]),t._v(" message)")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("startOutput")])]),t._v(" "),r("td",[t._v("Frontend ▶ Core")]),t._v(" "),r("td",[r("code",[t._v('{"machine": String}')])]),t._v(" "),r("td",[t._v("Start streaming output from a machine")])]),t._v(" "),r("tr",[r("td",[r("code",[t._v("stopOutput")])]),t._v(" "),r("td",[t._v("Frontend ▶ Core")]),t._v(" "),r("td",[r("code",[t._v('{"machine": String}')])]),t._v(" "),r("td",[t._v("Stop streaming output from a machine")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);